# =============================================================================
# OpenClaw Mission Control â€” Production Environment Variables
# =============================================================================
# Copy this file to .env.production and fill in actual values.
# NEVER commit .env.production to version control.
# =============================================================================

# --- Alibaba Cloud Container Registry (ACR) ---
ACR_REGISTRY=registry.cn-shenzhen.aliyuncs.com/your-namespace
TAG=latest

# --- ApsaraDB RDS PostgreSQL ---
RDS_HOST=rm-xxxxxxxxxxxxx.pg.rds.aliyuncs.com
RDS_PORT=5432
RDS_DB=mission_control
RDS_USER=mc_admin
RDS_PASS=CHANGE_ME_STRONG_PASSWORD

# Full connection URL (constructed from above, used by the application)
DATABASE_URL=postgresql+psycopg://${RDS_USER}:${RDS_PASS}@${RDS_HOST}:${RDS_PORT}/${RDS_DB}

# --- ApsaraDB Redis ---
REDIS_HOST=r-xxxxxxxxxxxxx.redis.rds.aliyuncs.com

# RQ job queue (DB 0)
RQ_REDIS_URL=redis://${REDIS_HOST}:6379/0
RQ_QUEUE_NAME=default
RQ_DISPATCH_THROTTLE_SECONDS=15.0
RQ_DISPATCH_MAX_RETRIES=3

# WebSocket relay pub/sub (DB 1)
WS_REDIS_PUBSUB_URL=redis://${REDIS_HOST}:6379/1

# --- Authentication ---
# Options: "local" (shared bearer token) or "clerk" (Clerk JWT)
AUTH_MODE=local
LOCAL_AUTH_TOKEN=CHANGE_ME_GENERATE_64_CHAR_RANDOM_TOKEN_HERE_MINIMUM_50_CHARACTERS

# Clerk (only if AUTH_MODE=clerk)
# CLERK_SECRET_KEY=sk_live_xxxxx
# NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_xxxxx

# --- CORS ---
CORS_ORIGINS=https://admin.xxx.com,https://h5.xxx.com

# --- H5 User Authentication (Module M3) ---
H5_JWT_SECRET=CHANGE_ME_GENERATE_64_CHAR_RANDOM_SECRET_HERE
H5_JWT_ACCESS_TTL_MINUTES=15
H5_JWT_REFRESH_TTL_DAYS=30

# --- WebSocket Relay (Module M4) ---
WS_HEARTBEAT_INTERVAL_SECONDS=30
WS_HEARTBEAT_TIMEOUT_SECONDS=90
WS_MAX_CONNECTIONS_PER_INSTANCE=10000

# --- Gateway Registration (Module M2) ---
GATEWAY_REGISTRATION_ENABLED=true
GATEWAY_HEARTBEAT_INTERVAL_SECONDS=30
GATEWAY_OFFLINE_THRESHOLD_SECONDS=90

# --- Application ---
ENVIRONMENT=production
DB_AUTO_MIGRATE=false
LOG_LEVEL=INFO
LOG_FORMAT=text
BASE_URL=https://api.xxx.com

# --- Backup (used by backup.sh) ---
BACKUP_DIR=/opt/backups/mc
RETENTION_DAYS=30
# UPLOAD_TO_OSS=1
# OSS_BUCKET=your-backup-bucket
# OSS_PATH=mc-backups
