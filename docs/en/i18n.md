# 前端国际化（i18n）文档

> 本项目前端使用**纯 React Context + localStorage** 方案实现中英文双语切换，
> **零新增 npm 依赖**，不影响任何业务逻辑。

---

## 文件结构

```
frontend/src/
├── lib/
│   ├── i18n.tsx           # LanguageProvider + useLanguage() Hook
│   └── translations.ts    # 中英文翻译字典（120+ 条目）
├── components/
│   └── ui/
│       └── language-switcher.tsx  # 语言切换下拉组件
└── ...
```

---

## 核心文件说明

### `src/lib/i18n.tsx`

提供语言 Context：

```tsx
import { useLanguage } from "@/lib/i18n";

const { language, toggleLanguage } = useLanguage();
// language: "en" | "zh"
// toggleLanguage(): 在两种语言间切换
```

- 初始语言从 `localStorage`（key: `mc_ui_language`）读取。
- 默认语言：`"en"`（英文）。

### `src/lib/translations.ts`

维护所有翻译字符串：

```ts
import { t } from "@/lib/translations";

const text = t(language, "dashboard_title");
// 中文时返回 "仪表盘"，英文时返回 "Dashboard"
```

**翻译范围**（共 120+ 条目）：

| 分区 | 涵盖内容 |
|------|----------|
| Sidebar | 所有导航标签、分区标题、系统状态 |
| Landing Page | Hero 区、功能卡片、CTA |
| Dashboard | 标题、KPI 卡片、图表、过滤器 |
| Gateways | 标题、描述、按钮、空状态、删除确认 |
| Settings | 所有表单标签、按钮、提示 |
| Common | 通用操作词（保存、取消、删除……） |
| Agents / Boards / Tags / Approvals / Skills | 页面标题、描述、登录引导 |

### `src/components/ui/language-switcher.tsx`

**Popover 下拉组件**，放置于侧边栏底部：

- 中文模式：按钮显示 **中文** ▾
- 英文模式：按钮显示 **English** ▾
- 展开后列出两个选项，当前语言旁有对勾 ✓
- 键盘可访问（focus ring、aria-label）

---

## 如何为新页面添加翻译

1. 在 `translations.ts` 中向 `en` / `zh` 两个对象**同时**添加新 key-value。
2. 在页面组件中引入 `useLanguage` 和 `t`：

```tsx
import { useLanguage } from "@/lib/i18n";
import { t } from "@/lib/translations";

export default function MyPage() {
  const { language } = useLanguage();
  return <h1>{t(language, "my_page_title")}</h1>;
}
```

3. 确保 `en` / `zh` 两侧 **key 数量相同**，否则 TypeScript 类型检查会报错（`satisfies Record<Language, Record<string, string>>`）。

---

## 注意事项

- **不要翻译**来自后端 API 的动态数据（看板名称、Agent 名称等）。
- **不要翻译** URL / 路由路径。
- 切换语言后即时生效，**不需要刷新页面**。
- 刷新后语言选择通过 `localStorage` 保留。
